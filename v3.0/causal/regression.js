importScripts("../v3.0/utils.js"),importScripts("https://cdnjs.cloudflare.com/ajax/libs/jstat/1.7.1/jstat.min.js");export const index=(t,e,d,a,r,n)=>{Date.now();let s=r[t.y]+", "+t["x[]"].map(t=>r[t]).join(", "),l=Ô(e[0].length,r[t.y],` by <b>${t["x[]"].map(t=>r[t]).join(", ")}</b>`),h=!e[a[t.y]].some(t=>null===t||isNaN(t))&&ʹ(mean(e[a[t.y]],d)),o=t["x[]"].map(t=>!e[a[t]].some(t=>null===t||isNaN(t))&&ʹ(mean(e[a[t]],d))),i="";if(!1===h)return{error:`Invalid variable: <b class="text-warning">${r[t.y]}</b> contains non-numeric value`+shake("y")};for(let e=0,d=o.length;e<d;e++)if(!1===o[e])return{error:`Invalid variable: <b class="text-warning">${r[t["x[]"][e]]}</b> contains non-numeric value`+shake("x[]")};if(t["x[]"].includes(t.y))return{error:`Cannot use <b class="text-warning">${r[t.y]}</b> as both dependent and independent variable`+shake("x[]")};var b=t["x[]"].length,c=e[0].length,m=[Array(c).fill(1)].concat(t["x[]"].map(t=>e[a[t]])),p=e[a[t.y]],u=[],x=[];for(let t=0;t<=b;t++){u[t]=[],x[t]=[Number(sum(mul(m[t],p),d).toFixed(9))];for(let e=0;e<=b;e++)u[t][e]=t<=e?Number(sum(mul(m[t],m[e]),d).toFixed(9)):u[e][t]}var $=jStat(jStat.inv(u)),f=$.multiply(x),y=jStat(trans(m)).multiply(f),v=p.map((t,e)=>t-y[e][0]),S={},j={},g={},w=[],N=[],R=[],C=[];S.t=sst(p,d),S.e=sumsq(v,d),S.r=S.t-S.e,j.t=len(p,d)-1,g.t=S.t/j.t,j.r=b,g.r=S.r/j.r,j.e=j.t-j.r,g.e=S.e/j.e;var F=sd(p,d);for(let t=0;t<=b;t++)w[t]=(g.e*$[t][t])**.5,N[t]=f[t][0]/w[t],C[t]=jStat.studentt.cdf(-Math.abs(N[t]),j.e),t&&(R[t]=f[t][0]*sd(m[t],d)/F);var z=g.r/g.e,A=1-jStat.centralF.cdf(z,j.r,j.e),k=S.r/S.t,q=k**.5,E=1-g.e/g.t,M=g.e**.5;return{title:"Linear Regression",vars:s,body:l+(i=`\n\t\t<h6>Model Summary</h6>\n\t\t<table class="table table-sm table-bordered table-hover" style="width:360px">\n\t\t\t<thead class="text-center">\n\t\t\t\t<tr><th class="px-4">R</th><th class="px-4">R<sup>2</sup></th><th>Adjusted R<sup>2</sup></th><th>Std.Error of<br>the Estimate</th></tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr><td>${Ś(q,3)}</td><td>${Ś(k,3)}</td><td>${Ś(E,3)}</td><td>${Ś(M,4)}</td></tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t<h6 class="mt-4 pt-2">ANOVA</h6>\n\t\t<table class="table table-sm table-bordered table-hover" data-left="1" data-bold="1" style="max-width:640px">\n\t\t\t<thead class="text-center">\n\t\t\t\t<tr><th></th><th>Sum of Square</th><th class="px-3"><div title="Degree of Freedom">df</div></th><th>Mean Square</th><th>F</th><th class="px-3">Sig.</th></tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr><td>Regression</td><td>${Ś(S.r,h-1)}</td><td>${j.r}</td><td>${Ś(g.r,h-1)}</td><td>${Ś(z,3)}</td><td>${Ś(A,3)}</td></tr>\n\t\t\t\t<tr><td>Residual</td><td>${Ś(S.e,h-1)}</td><td>${j.e}</td><td>${Ś(g.e,h-1)}</td><td></td><td></td></tr>\n\t\t\t\t<tr><td>Total</td><td>${Ś(S.t,h-1)}</td><td>${j.t}</td><td></td><td></td><td></td></tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t<h6 class="mt-4 pt-2">Coefficients</h6>\n\t\t<table class="table table-sm table-bordered table-hover" data-left="1" data-bold="1" style="max-width:640px">\n\t\t\t<thead class="text-center">\n\t\t\t\t<tr><th rowspan="2"></th><th colspan="2" class="fz-11">Unstandardized Coefficients</th><th class="fz-11">Standardized Coefficients</th><th rowspan="2" class="px-3">t</th><th rowspan="2" class="px-3">Sig.</th></tr>\n\t\t\t\t<tr><th class="text-center">Beta</th><th>Std.Error</th><th>Beta</th></tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr><td>(Constant)</td><td>${Ś(f[0][0],h)}</td><td>${Ś(w[0],h)}</td><td></td><td>${Ś(N[0],3)}</td><td>${Ś(C[0],3)}</td></tr>\n\t\t\t\t${t["x[]"].map((t,e)=>`<tr><td>${r[t]}</td><td>${Ś(f[e+1][0],h)}</td><td>${Ś(w[e+1],h)}</td><td>${Ś(R[e+1],h)}</td><td>${Ś(N[e+1],3)}</td><td>${Ś(C[e+1],3)}</td></tr>`).join("")}\n\t\t\t</tbody>\n\t\t</table>\n\t`)}};