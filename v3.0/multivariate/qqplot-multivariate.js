importScripts("../v3.0/utils.js"),importScripts("https://cdnjs.cloudflare.com/ajax/libs/jstat/1.7.1/jstat.min.js");export const index=(t,a,i,e,n,r)=>{const l=Date.now();let s=t["y[]"].map(t=>n[t]).join(", "),o=Ã”(a[0].length,s),c="";var u=t["y[]"].length,h=len(a[0],i),d=[],m=[];for(let l=0;l<u;l++){if(a[e[t["y[]"][l]]].some(t=>null===t||isNaN(t))||r.find(a=>a[0]==n[t["y[]"][l]]))return{error:`Invalid variable: <b class="text-warning">${n[t["y[]"][l]]}</b> contains non-numeric value`+shake("y[]")};d[l]=dis(a[e[t["y[]"][l]]],i),m[l]=[];for(let n=0;n<u;n++)m[l][n]=l<=n?cov(a[e[t["y[]"][l]]],a[e[t["y[]"][n]]],i):m[n][l]}var p=jStat.inv(m),y=trans(d).map(t=>jStat([t]).multiply(p).multiply(trans([t]))),b=rank(y,i);return b.forEach((t,a)=>b[a][1]=jStat.chisquare.inv((t[1]-.375)/(h+.25),u)),{title:"Multivariate Normality Q-Q Plot",vars:s,body:o+(c+="<h6>Multivariate Normality Q-Q Plot</h6>"+highcharts(l,["qqplot"],`{\n\t\t\t\t\tseries: [\n\t\t\t\t\t\t{ type: 'line', color: '#ddd', lineWidth: 1, marker:{enabled:false}, data: [[0,0],[${b[b.length-1][0]},${b[b.length-1][0]}]], enableMouseTracking: false },\n\t\t\t\t\t\t{ data: ${JSON.stringify(b.map(t=>(([t,a])=>[Number(t.toFixed(5)),Number(a.toFixed(5))])(t)))}},\n\t\t\t\t\t],\n\t\t\t\t\txAxis:{title:{text:"Squared Mahalanobis Distance"}},\n\t\t\t\t\tyAxis:{title:{text:"Chi-Square Quantiles"}},\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\tformatter: function() { return 'Chi-Square Quantiles: <b>'+this.point.y+'</b><br>Squared Mahalanobis Distance: <b>'+this.point.x+'</b>'; }\n\t\t\t\t\t},\n\t\t\t\t\tplotOptions: {scatter: {marker: {fillColor: toRGBA(colors.success, .65)}}},\n\t\t\t\t}`)+highchartsReflow([l]))}};